@model Yucca.Areas.Admin.ViewModels.Product.ProductListViewModel
@{
    ViewBag.Title = "لیست محصولات";
    var postUrl = Url.Action("Delete", "Product");
}

<div class="row">
    <div class="col-lg-12">
        @using (Html.BeginForm("Index", "Product", new { @class = "form-horizontal", id = "productSearchForm" }))
        {

            <div class="col-md-3">
                <input name="term" placeholder="جستجو " value="" type="text" class="form-control" />
            </div>

            <div class="col-md-3">
                @Html.DropDownList("categoryId", ViewBag.Categories as IEnumerable<SelectListItem>, "--همه گروه ها--", new { @class = "selectpicker" })
            </div>
            <div class="col-md-2" data-toggle="tooltip" data-placement="top" title="ارسال رایگان">
                <strong>ارسال رایگان</strong>
                @Html.CheckBox("freeSend", false)
            </div>

            <div class="col-md-2" data-toggle="tooltip" data-placement="top" title="حذف شده">
                <strong>حذف شده</strong>
                @Html.CheckBox("deleted", false)
            </div>
            <div class="col-md-2">
                <input type="submit" value="جست و جو" class="btn btn-md btn-default" />
            </div>
        }
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="table-responsive" id="productsList">
            @Html.AntiForgeryToken()
            <table class="table table-striped table-hover" id="productTable">
                <thead>
                    <tr>

                        <th>نام</th>
                        <th>اطلاعات آماری</th>
                        <th>درصد تخفیف</th>
                        <th>ضریب خرید</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var product in Model.ProductList)
                    {
                        <tr class="@(product.Notification? "danger":"")">

                            <td>@product.Name</td>
                            <td>
                                <strong class="text-info">قیمت:@Html.DisplayFor(a => product.Price)</strong>
                                <strong class="text-success">تعداد موجود:@Html.DisplayFor(a => product.Stock)</strong>
                                <br />
                                <strong class="text-primary">تعداد رزرو:@Html.DisplayFor(a => product.ReserveCount)</strong>
                                <strong class="text-warning">تعداد بازدید:@product.ViewCount</strong>
                            </td>

                            <td class="text-center">@product.DiscountPercent</td>
                            <td class="text-center">@Html.DisplayFor(a => product.Ratio)</td>


                            <td class="text-left">
                                <a class="btn btn-sm btn-success" data-toggle="tooltip" data-placement="top" title="ویرایش"
                                   href="@Url.Action("Edit","Product",new {id=product.Id})">
                                    <i class=" glyphicon glyphicon-pencil"></i>
                                </a>
                                <span data-toggle="tooltip" data-placement="top" title="حذف" id="row-@product.Id" class="btn btn-danger btn-sm">
                                    <i class="fa fa-trash-o"></i>
                                </span>
                                @if (product.AddedImages)
                                {
                                    <a class="btn btn-sm btn-info" data-toggle="tooltip" data-placement="top" title=" تصاویر"
                                       href="@Url.Action("Edit","ProductPicture",new {productId=product.Id})">
                                        <i class="fa fa-edit"> </i>
                                    </a>
                                }
                                else
                                {
                                    <a class="btn btn-sm btn-info" data-toggle="tooltip" data-placement="top" title=" تصاویر"
                                       href="@Url.Action("Create","ProductPicture",new {productId=product.Id})">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                }
                                <a data-ajax="true" data-ajax-method="GET" data-ajax-mode="replace" class="btn btn-sm btn-primary"
                                   data-ajax-success="LightBox.onSuccess" data-ajax-update="#lightBox" data-toggle="modal"
                                   href="@Url.Action("FillAttributes", "AttributeOption", new { productId = product.Id })" rel="nofollow" role="button">
                                    <i class="fa fa-list" data-toggle="tooltip" data-placement="top" title="مشحصات"></i>
                                </a>

                            </td>
                        </tr>
                    }
                </tbody>

            </table>
            @using (Html.BeginForm("Index", "Product", new { @class = "form-horizontal", id = "productFilterForm" }))
            {
                <div class="row">
                    <div class="col-md-7">
                        <div class="col-md-4">
                            @Html.DropDownList("productOrderBy", ViewBag.ProductOrderByList as IEnumerable<SelectListItem>, new { @class = "form-control" })
                        </div>
                        <div class="col-md-3">
                            @Html.DropDownList("order", ViewBag.OrderList as IEnumerable<SelectListItem>, new { @class = "form-control" })
                        </div>
                        <div class="col-md-2">
                            @Html.DropDownList("count", ViewBag.CountList as IEnumerable<SelectListItem>, new { @class = "form-control" })
                        </div>

                        <div class="col-md-3"><input type="submit" value="مرتب سازی" class="btn btn-md btn-default" /></div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
